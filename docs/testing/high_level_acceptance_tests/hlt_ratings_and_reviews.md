# High-Level Acceptance Test: Submit and View Ratings and Reviews

**Test ID:** HLT-006
**Test Title/Objective:** Verify that users, authenticated via Supastarter, can submit ratings and reviews for completed Neighborly Skillshare exchanges, and these are accurately displayed on user profiles.
**Priority:** High
**Version:** 1.1 (Revised for Supastarter Template Integration)
**References:**
*   [`init_docs/blueprint.md (Section 3.1)`](../../../init_docs/blueprint.md#L34)
*   [`init_docs/product_requirements.md (Sections 2.2.4, 4.2.5)`](../../../init_docs/product_requirements.md#L155)
*   [`docs/research/high_level_test_strategy_report.md (Section 3.5)`](../../research/high_level_test_strategy_report.md#L70)
*   [`docs/research/github_template_research_report.md`](../../research/github_template_research_report.md)
*   [`docs/template_integration_guide.md`](../../template_integration_guide.md)

## 1. Preconditions
*   The Neighborly Skillshare MVP web application, built upon Supastarter, is deployed and accessible.
*   Two test users are registered via Supastarter, email verified, logged in, and have Neighborly Skillshare profiles:
    *   User A (Seeker): "Robert (`robert_seeker_supastarter_email@example.com`)"
    *   User B (Provider): "Maya (`maya_provider_supastarter_email@example.com`)"
*   An exchange between Robert and Maya has been marked as "completed" in the custom `exchanges` table (as per [`docs/template_integration_guide.md`](../../template_integration_guide.md)). For instance, Robert requested "Graphic Design Advice" (linked to a `skill_requests` record) and Maya provided it (linked to a `skill_offers` record), and this interaction is recorded in `exchanges` with `status = 'completed'`.
*   Neither Robert nor Maya has previously reviewed this specific completed exchange.
*   The custom `reviews` table is ready to store review data.

## 2. Test Steps

| Step | Action (User A: Robert)                                                                              | Expected Result (User A: Robert)                                                                                                                               | Action (User B: Maya)                                                                                | Expected Result (User B: Maya)                                                                                                                                | AI Verifiable Completion Criterion (Combined)                                                                                                                                                                                                                                                        |
| :--- | :--------------------------------------------------------------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1    | Log in as Robert. Navigate to "Past Exchanges" or directly to Maya's Neighborly Skillshare profile.    | Robert sees an option to "Leave a Review" for Maya for the completed "Graphic Design Advice" exchange (custom UI).                                           | Log in as Maya (separate session). Navigate to her Neighborly Skillshare profile page.             | Maya's profile page displayed. Initially, no review from Robert for this exchange. Her overall rating (from `profiles` table) might be X.                      | AI (Robert): Verify "Leave a Review" button/link is present for the specific exchange with Maya. AI (Maya): Verify Maya's profile loads.                                                                                                                                                     |
| 2    | Click "Leave a Review" for Maya.                                                                     | A review submission form (custom UI) appears: star rating (1-5 stars) and a comment text field.                                                                | (Observes her profile later)                                                                         | (No immediate change)                                                                                                                                           | AI (Robert): Verify review form elements are present.                                                                                                                                                                                                                                   |
| 3    | Select 5 stars for Maya. Enter comment: "Maya was fantastic! Provided excellent graphic design advice. Highly recommended." | Star selection and comment accepted.                                                                                                                           | (No immediate change)                                                                                | (No immediate change)                                                                                                                                           | AI (Robert): Verify 5 stars selected. Text area contains comment.                                                                                                                                                                                                                       |
| 4    | Click "Submit Review".                                                                               | Review submitted. Confirmation "Review submitted successfully!" appears. Option to review this exchange may disappear/change.                                      | (No immediate change)                                                                                | (No immediate change)                                                                                                                                           | AI (Robert): Verify success message. Option to review updated. Database: New record in `reviews` table (from Robert for Maya, linked to `exchanges.id`, 5 stars, comment). `profiles.average_rating` for Maya might be updated via trigger/function. |
| 5    | Navigate to Maya's Neighborly Skillshare profile page.                                               | Robert sees his 5-star review and comment on Maya's profile. Maya's overall rating is updated.                                                                 | (Refreshes her profile page)                                                                         | Maya sees Robert's 5-star review and comment on her profile. Her overall rating is updated.                                                                     | AI (Robert & Maya): Verify on Maya's profile, Robert's review (5 stars, comment) is visible. Verify Maya's average rating (from `profiles` table) is correctly displayed.                                                                                                              |
| 6    | (Maya's turn) Navigate to Robert's profile or "Past Exchanges".                                      | (Robert logged out/other page)                                                                                                                               | Maya sees an option to "Leave a Review" for Robert for the same exchange.                              | (Robert's profile loads, no review from Maya yet)                                                                                                               | AI (Maya): Verify "Leave a Review" button/link for Robert for the exchange.                                                                                                                                                                                                             |
| 7    | Click "Leave a Review" for Robert.                                                                   | (Robert logged out/other page)                                                                                                                               | Review submission form appears for Robert.                                                           | (No immediate change)                                                                                                                                           | AI (Maya): Verify review form elements present.                                                                                                                                                                                                                                             |
| 8    | Select 4 stars for Robert. Enter comment: "Robert was clear about his needs and easy to work with."    | (Robert logged out/other page)                                                                                                                               | Star selection and comment accepted.                                                                 | (No immediate change)                                                                                                                                           | AI (Maya): Verify 4 stars selected. Text area contains comment.                                                                                                                                                                                                                          |
| 9    | Click "Submit Review".                                                                               | (Robert logged out/other page)                                                                                                                               | Review submitted. Confirmation message appears.                                                      | (No immediate change)                                                                                                                                           | AI (Maya): Verify success message. Database: New record in `reviews` from Maya for Robert. `profiles.average_rating` for Robert might be updated.                                                                                                                                      |
| 10   | (Robert logs back in) Navigate to Robert's Neighborly Skillshare profile page.                       | Robert sees Maya's 4-star review and comment on his profile. His overall rating is updated.                                                                    | Navigate to Robert's profile page.                                                                   | Maya sees her 4-star review and comment on Robert's profile. Robert's overall rating is updated.                                                                | AI (Robert & Maya): Verify on Robert's profile, Maya's review (4 stars, comment) is visible. Verify Robert's average rating is correctly displayed.                                                                                                                                   |
| 11   | (Maya) On her own profile, find Robert's review. If "Respond to Review" is MVP, click it.              | (Robert logged out/other page)                                                                                                                               | Text field appears for Maya to respond to Robert's review.                                           | (No immediate change)                                                                                                                                           | AI (Maya): Verify "Respond to Review" option and input field appear (if MVP).                                                                                                                                                                                                     |
| 12   | Type response: "Thanks, Robert! Glad I could help." and submit.                                      | (Robert logged out/other page)                                                                                                                               | Response submitted and appears nested under Robert's review on Maya's profile.                       | (No immediate change)                                                                                                                                           | AI (Maya): Verify response appears under Robert's review on Maya's profile (if MVP). Database: `review_responses` record created (if MVP).                                                                                                                                         |

## 3. Test Data
*   User A (Seeker): Robert (`robert_seeker_supastarter_email@example.com`)
*   User B (Provider): Maya (`maya_provider_supastarter_email@example.com`)
*   Completed Exchange: Robert sought "Graphic Design Advice", Maya provided (ID in `exchanges` table).
*   Robert's Review for Maya: 5 stars, "Maya was fantastic! Provided excellent graphic design advice. Highly recommended."
*   Maya's Review for Robert: 4 stars, "Robert was clear about his needs and easy to work with."
*   Maya's Response (if MVP): "Thanks, Robert! Glad I could help."

## 4. Expected Overall Result
Users can submit ratings/reviews for completed exchanges via custom Neighborly Skillshare UI. These are stored in the `reviews` table and displayed on profiles. Average ratings on `profiles` table are updated.

## 5. AI Verifiable End Result
*   Records in `reviews` table for the exchange, with correct data.
*   Maya's profile UI displays Robert's review. Maya's `profiles.average_rating` updated.
*   Robert's profile UI displays Maya's review. Robert's `profiles.average_rating` updated.
*   If responses are MVP, Maya's response visible and stored in `review_responses`.
*   AI verifies via UI text, star ratings, average ratings, and database checks in `reviews`, `profiles`, `review_responses` tables.